(this["webpackJsonptest-link"]=this["webpackJsonptest-link"]||[]).push([[0],{10:function(e,n,t){e.exports={container:"Input_container__16MGs",input:"Input_input__24dvw",label:"Input_label__3-Wil",containerActive:"Input_containerActive__NKmK5"}},11:function(e,n,t){e.exports={message:"Links_message__SKLEX",heightAnim:"Links_heightAnim__3DO1x",appear:"Links_appear__3MU0v",image:"Links_image__4rLoB",urlMessage:"Links_urlMessage__2SEs9",textMessage:"Links_textMessage__2QzVe"}},16:function(e,n,t){e.exports={logIn:"Login_logIn__3Av5G",topBar:"Login_topBar__2FKYl",buttonContainer:"Login_buttonContainer___HDtm",errorContainer:"Login_errorContainer__3Rfne",appearFromBottom:"Login_appearFromBottom__25jzz"}},17:function(e,n,t){e.exports={contextMenu:"ContextMenu_contextMenu__3qmsv",contextMenuHidden:"ContextMenu_contextMenuHidden__2YEnK",item:"ContextMenu_item__2ziTi"}},2:function(e,n,t){e.exports={main:"Main_main__3de2d",inputContainer:"Main_inputContainer__35VOy",inputContainerText:"Main_inputContainerText__P3SPV",inputButton:"Main_inputButton__30NvA",uploadImageContainer:"Main_uploadImageContainer__2-OV5",uploadImage:"Main_uploadImage__3UDpu",uploadImageSvg:"Main_uploadImageSvg__3Bl80",loadingSvg:"Main_loadingSvg__3Lonw",rotate:"Main_rotate__fUcs_",loading:"Main_loading__1-56n",enbigger:"Main_enbigger__Z3RkF",blurEffect:"Main_blurEffect__3jrdr",h1Container:"Main_h1Container__2GtL-",rotation:"Main_rotation__1jzl2",topBar:"Main_topBar__2kkWe",logOut:"Main_logOut__zT7Ja",menuContainer:"Main_menuContainer__2znkv",menuContainerOpen:"Main_menuContainerOpen__2NfKL",menuCloseButton:"Main_menuCloseButton__RIzsQ",menuList:"Main_menuList__3YNmC",menuItem:"Main_menuItem__3mXI_",flexContainer:"Main_flexContainer__2QlCf",flexTop:"Main_flexTop__37RFt",flexBottom:"Main_flexBottom__1Y8lE",welcomeContainer:"Main_welcomeContainer__2rSMK"}},35:function(e,n,t){e.exports={container:"App_container__1MQN3"}},41:function(e,n,t){},67:function(e,n,t){"use strict";t.r(n);var a=t(1),i=t.n(a),c=t(34),o=t.n(c),s=(t(41),t(35)),r=t.n(s),l=t(5),u=t(10),d=t.n(u),j=t(0);function p(e){var n=e.label,t=e.id,i=e.value,c=e.onChange,o=e.type,s=e.onKeyPress,r=Object(a.useState)(!1),u=Object(l.a)(r,2),p=u[0],b=u[1];return Object(j.jsxs)("div",{className:p?"".concat(d.a.container," ").concat(d.a.containerActive):d.a.container,children:[void 0!==n&&Object(j.jsx)("label",{className:d.a.label,htmlFor:t,children:n}),Object(j.jsx)("input",{onKeyPress:s,onChange:c,value:i,onFocus:function(){b(!0)},onBlur:function(){""===i&&b(!1)},id:t,className:d.a.input,type:o})]})}function b(e){var n=e.label,t=e.id,i=e.value,c=e.onChange,o=Object(a.useState)(!1),s=Object(l.a)(o,2),r=s[0],u=s[1];return Object(j.jsxs)("div",{className:r?"".concat(d.a.container," ").concat(d.a.containerActive):d.a.container,children:[Object(j.jsx)("label",{className:d.a.label,htmlFor:t,children:n}),Object(j.jsx)("input",{onChange:c,value:i,onFocus:function(){u(!0)},onBlur:function(){""===i&&u(!1)},id:t,className:d.a.input,type:"password"})]})}var m=t(15),f=t.n(m),h=t(21),x=t(12),g=t.n(x);function _(){return(_=Object(h.a)(f.a.mark((function e(){var n;return f.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,g.a.get("/api/getuser");case 2:if(200===(n=e.sent).data.code){e.next=5;break}throw new Error(n);case 5:return e.abrupt("return",n.data.user);case 6:case"end":return e.stop()}}),e)})))).apply(this,arguments)}function O(){return(O=Object(h.a)(f.a.mark((function e(){var n;return f.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,g.a.get("/api/logout");case 2:return n=e.sent,e.abrupt("return",n);case 4:case"end":return e.stop()}}),e)})))).apply(this,arguments)}var v=t(16),w=t.n(v),C=t(3);function M(){var e=Object(a.useState)({username:"",password:""}),n=Object(l.a)(e,2),t=n[0],i=n[1],c=Object(C.f)(),o=Object(a.useState)(!1),s=Object(l.a)(o,2),r=s[0],u=s[1];return Object(j.jsxs)("div",{className:w.a.logIn,children:[Object(j.jsx)("div",{className:w.a.topBar,children:Object(j.jsx)("h1",{children:"Lnk"})}),Object(j.jsxs)("form",{onSubmit:function(e){var n,a;e.preventDefault(),(n=t.username,a=t.password,g.a.post("/api/login",{email:n,pass:a})).then((function(){c.push("/")})).catch((function(){u(!0),setTimeout((function(){u(!1)}),4e3)})),i({username:"",password:""})},children:[Object(j.jsx)(p,{onChange:function(e){i((function(n){return{username:e.target.value,password:n.password}}))},id:"username",value:t.username,label:"Email",type:"email"}),Object(j.jsx)(b,{onChange:function(e){i((function(n){return{username:n.username,password:e.target.value}}))},id:"password",value:t.password,label:"Password"}),Object(j.jsx)("div",{className:w.a.buttonContainer,children:Object(j.jsx)("button",{type:"submit",children:"Log in"})})]}),r&&Object(j.jsx)("div",{className:r?w.a.errorContainer:"",children:"Wrong email or password :("})]})}var k=t(24),N=t(2),L=t.n(N),y=t(11),S=t.n(y);function I(e){var n=e.content,t=e.openContextMenu,a=[{label:"Copy image URL",fn:function(){navigator.clipboard.writeText(n)}},{label:"Open in new tab",fn:function(){window.open(n)}}];return Object(j.jsx)("div",{onContextMenu:function(e){e.preventDefault();var n=e.clientX||0,i=e.clientY||0;t(n,i,a)},className:"".concat(S.a.message," ").concat(S.a.textMessage),children:Object(j.jsx)("img",{className:S.a.image,src:n,alt:"image sent by lnk"})})}function B(e){var n=e.content,t=e.openContextMenu,a=[{label:"Copy",fn:function(){navigator.clipboard.writeText(n)}}];return Object(j.jsx)("div",{onContextMenu:function(e){e.preventDefault();var n=e.clientX,i=e.clientY;t(n,i,a)},className:"".concat(S.a.textMessage," ").concat(S.a.message),children:Object(j.jsx)("span",{children:n})})}function E(e){var n=e.content,t=e.openContextMenu,a=[{label:"Go to URL",fn:function(){window.open(n,"_blank")}},{label:"Copy URL",fn:function(){navigator.clipboard.writeText(n)}}];return Object(j.jsx)("div",{onContextMenu:function(e){e.preventDefault();var n=e.clientX,i=e.clientY;t(n,i,a)},onClick:function(){return e=n,void(window.electron?window.electron.openURL(e):window.open(e));var e},className:"".concat(S.a.message," ").concat(S.a.urlMessage),children:Object(j.jsx)("span",{children:n})})}var F=function(e){var n=e.links,t=e.openContextMenu,a=function(e){switch(e.type){case"url":return Object(j.jsx)(E,{openContextMenu:t,content:e.message});case"img":return Object(j.jsx)(I,{openContextMenu:t,content:e.message});default:return Object(j.jsx)(B,{openContextMenu:t,content:e.message})}},i=n.map((function(e,t){return Object(j.jsx)("div",{children:a(e)},n.length-t)}));return Object(j.jsx)("div",{className:S.a.linksContainer,children:i})},T=t(17),A=t.n(T);var R=function(e){var n=e.context;return Object(j.jsx)("div",{style:{left:"".concat(n.x,"px"),top:"".concat(n.y,"px")},className:n.visible?A.a.contextMenu:"".concat(A.a.contextMenu," ").concat(A.a.contextMenuHidden),children:n.items.map((function(e){return Object(j.jsx)("div",{className:A.a.item,onClick:function(){return e.fn()},children:Object(j.jsx)("span",{children:e.label})},e.label)}))})},K="wss://lnk.mssnapps.com/ws";function z(){var e=Object(a.useState)({email:"",firstname:"",id:0,key:"",lastname:"",username:""}),n=Object(l.a)(e,2),t=n[0],i=n[1],c=Object(a.useState)([]),o=Object(l.a)(c,2),s=o[0],r=o[1],u=Object(a.useState)(null),d=Object(l.a)(u,2),b=d[0],m=d[1],f=Object(a.useState)(!1),h=Object(l.a)(f,2),x=h[0],v=h[1],w=Object(a.useState)(""),M=Object(l.a)(w,2),N=M[0],y=M[1],S=Object(C.f)(),I=Object(a.useState)(!1),B=Object(l.a)(I,2),E=B[0],T=B[1],A=Object(a.useState)(!1),z=Object(l.a)(A,2),D=z[0],P=z[1],U=Object(a.useState)(!1),W=Object(l.a)(U,2),J=W[0],Y=W[1],V=null,H=Object(a.useState)({x:0,y:0,visible:!1,items:[]}),X=Object(l.a)(H,2),G=X[0],Q=X[1];Object(a.useEffect)((function(){window.electron&&(window.electron.getIsNotificationActive().then((function(e){T(e)})),window.electron.getIsOpenLnk().then((function(e){P(e)})))}),[]);var q=Object(a.useState)(!1),Z=Object(l.a)(q,2),$=Z[0],ee=Z[1],ne=function(e){var n="";if(e)n=JSON.stringify({code:"message",id:t.key,message:e});else{if(""===N)return;n=JSON.stringify({code:"message",id:t.key,message:N}),y("")}b.send(n)};Object(a.useEffect)((function(){(function(){return _.apply(this,arguments)})().then((function(e){i(e),m(new WebSocket(K)),window.electron&&window.electron.sendId(e)})).catch((function(){S.push("/login")}))}),[S]),Object(a.useEffect)((function(){""!==t.key&&null!==b&&(b.addEventListener("message",(function(e){var n=JSON.parse(e.data);"message"===n.code&&r(n.content),"success"===n.code&&r(n.content)})),b.addEventListener("open",(function(){v(!0);var e=JSON.stringify({code:"init",id:t.key,message:""});b.send(e)})),b.addEventListener("close",(function(){m(new WebSocket(K))})),b.addEventListener("error",(function(){v(!1),m(null)})))}),[b,t]);var te=function(){(function(){return O.apply(this,arguments)})().then((function(){S.push("/login")})).catch((function(){alert("There was some problem logging out! :(")}))};return Object(j.jsxs)("div",{onClick:function(){Q((function(e){return Object(k.a)(Object(k.a)({},e),{},{visible:!1})}))},ref:function(e){return V=e},className:L.a.main,children:[!x&&Object(j.jsx)("div",{className:L.a.loading,children:Object(j.jsx)("div",{className:L.a.h1Container,children:Object(j.jsx)("h1",{children:"Lnk"})})}),Object(j.jsxs)("div",{className:$?"".concat(L.a.menuContainer," ").concat(L.a.menuContainerOpen):L.a.menuContainer,children:[Object(j.jsx)("button",{className:L.a.menuCloseButton,onClick:function(){return ee(!1)},children:Object(j.jsx)("svg",{"aria-hidden":"false",width:"12",height:"12",viewBox:"0 0 12 12",children:Object(j.jsx)("polygon",{fill:"currentColor",fillRule:"evenodd",points:"11 1.576 6.583 6 11 10.424 10.424 11 6 6.583 1.576 11 1 10.424 5.417 6 1 1.576 1.576 1 6 5.417 10.424 1"})})}),Object(j.jsxs)("ul",{className:L.a.menuList,children:[window.electron&&Object(j.jsxs)("li",{className:L.a.menuItem,children:[Object(j.jsx)("label",{htmlFor:"isNotCheck",children:"Notifications"}),Object(j.jsx)("input",{id:"isNotCheck",onChange:function(e){window.electron&&window.electron.setIsNotificationActive(e.target.checked).then((function(e){T(e)})).catch((function(e){console.error("Error communicating with Electron",e)}))},checked:E,type:"checkbox"})]}),window.electron&&Object(j.jsxs)("li",{className:L.a.menuItem,children:[Object(j.jsx)("label",{htmlFor:"openLnk",children:"Open "}),Object(j.jsx)("input",{id:"openLnk",onChange:function(e){window.electron&&window.electron.setIsOpenLnk(e.target.checked).then((function(e){P(e)})).catch((function(e){console.error("Error communicating with electron",e)}))},checked:D,type:"checkbox"})]}),Object(j.jsx)("li",{onClick:function(){return te()},className:L.a.menuItem,children:"Log out"})]})]}),Object(j.jsxs)("div",{className:L.a.flexContainer,children:[Object(j.jsxs)("div",{className:L.a.flexTop,children:[Object(j.jsxs)("div",{className:L.a.topBar,children:[Object(j.jsx)("h1",{children:"Lnk"}),Object(j.jsx)("button",{className:L.a.logOut,onClick:function(){return ee(!0)},children:"Menu"})]}),Object(j.jsx)("div",{className:L.a.welcomeContainer,children:Object(j.jsxs)("span",{children:["Welcome ",t.username,"!"]})}),Object(j.jsxs)("div",{className:L.a.inputContainer,children:[Object(j.jsx)("div",{className:L.a.inputContainerText,children:Object(j.jsx)(p,{onKeyPress:function(e){"Enter"===e.code&&ne()},onChange:function(e){y(e.target.value)},value:N,type:"text"})}),Object(j.jsx)("button",{disabled:""===N,className:L.a.inputButton,onClick:function(){return ne()},children:"Send"}),Object(j.jsxs)("div",{className:L.a.uploadImageContainer,children:[Object(j.jsx)("label",{className:L.a.uploadImage,htmlFor:"image-upload",children:J?Object(j.jsxs)("svg",{className:L.a.loadingSvg,xmlns:"http://www.w3.org/2000/svg",width:"30",height:"30",viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",strokeLinecap:"round",strokeLinejoin:"round",children:[Object(j.jsx)("path",{d:"M22 12c0 6-4.39 10-9.806 10C7.792 22 4.24 19.665 3 16"}),Object(j.jsx)("path",{d:"M2 12C2 6 6.39 2 11.806 2 16.209 2 19.76 4.335 21 8"}),Object(j.jsx)("path",{d:"M7 17l-4-1-1 4"}),Object(j.jsx)("path",{d:"M17 7l4 1 1-4"})]}):Object(j.jsxs)("svg",{className:L.a.uploadImageSvg,xmlns:"http://www.w3.org/2000/svg",width:"30",height:"30",viewBox:"0 0 24 24",fill:"none",stroke:"#dddbdb",strokeWidth:"2",strokeLinecap:"round",strokeLinejoin:"round",children:[Object(j.jsx)("path",{d:"M2 6a4 4 0 0 1 4-4h12a4 4 0 0 1 4 4v12a4 4 0 0 1-4 4H6a4 4 0 0 1-4-4V6z"}),Object(j.jsx)("circle",{cx:"8.5",cy:"8.5",r:"2.5"}),Object(j.jsx)("path",{d:"M14.526 12.621L6 22h12.133A3.867 3.867 0 0 0 22 18.133V18c0-.466-.175-.645-.49-.99l-4.03-4.395a2 2 0 0 0-2.954.006z"})]})}),Object(j.jsx)("input",{onChange:function(e){var n=e.target.files[0];if(n){Y(!0);var t=new FileReader;t.onload=function(e){var n=e.target.result.split(",")[1]||"",t=function(e){for(var n=["a","b","2","d","3","f"],t=[],a=0;a<e;a++){var i=n[Math.floor(Math.random()*n.length)];t.push(i)}return t.join("")}(24);g.a.post("/api/signimage",{token:t}).then((function(e){var a=e.data,i=a.signature,c=a.expire,o=new FormData;o.append("file",n),o.append("fileName","thisisanimage"),o.append("publicKey","public_StqLacAIgiwRS/m4q50jge6vwIo="),o.append("signature",i),o.append("expire",c),o.append("token",t);g.a.post("https://upload.imagekit.io/api/v1/files/upload",o).then((function(e){var n="https://ik.imagekit.io/ft0gvf67ajj/".concat(e.data.name);ne(n),Y(!1)})).catch((function(e){console.error(e),Y(!1)}))})).catch((function(e){console.error(e),Y(!1)}))},t.readAsDataURL(n)}},style:{display:"none"},type:"file",id:"image-upload",name:"image",accept:"image/*"})]})]})]}),Object(j.jsx)("div",{className:L.a.flexBottom,children:Object(j.jsx)(F,{openContextMenu:function(e,n,t){var a,i=null===(a=V)||void 0===a?void 0:a.getBoundingClientRect(),c=e-i.x,o=n-i.y;Q({x:c,y:o,visible:!0,items:t})},links:s})})]}),Object(j.jsx)(R,{context:G})]})}var D=t(18);function P(){return Object(j.jsx)(D.a,{basename:"/",children:Object(j.jsx)("div",{className:r.a.container,children:Object(j.jsxs)(C.c,{children:[Object(j.jsx)(C.a,{path:"/login",children:Object(j.jsx)(M,{})}),Object(j.jsx)(C.a,{path:"/",children:Object(j.jsx)(z,{})})]})})})}var U=function(e){e&&e instanceof Function&&t.e(3).then(t.bind(null,68)).then((function(n){var t=n.getCLS,a=n.getFID,i=n.getFCP,c=n.getLCP,o=n.getTTFB;t(e),a(e),i(e),c(e),o(e)}))};o.a.render(Object(j.jsx)(i.a.StrictMode,{children:Object(j.jsx)(P,{})}),document.getElementById("root")),U()}},[[67,1,2]]]);
//# sourceMappingURL=main.67d4db99.chunk.js.map
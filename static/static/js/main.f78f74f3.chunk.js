(this["webpackJsonptest-link"]=this["webpackJsonptest-link"]||[]).push([[0],{10:function(e,n,t){e.exports={container:"Input_container__16MGs",input:"Input_input__24dvw",label:"Input_label__3-Wil",containerActive:"Input_containerActive__NKmK5"}},12:function(e,n,t){e.exports={message:"Links_message__SKLEX",heightAnim:"Links_heightAnim__3DO1x",appear:"Links_appear__3MU0v",urlMessage:"Links_urlMessage__2SEs9",textMessage:"Links_textMessage__2QzVe"}},16:function(e,n,t){e.exports={logIn:"Login_logIn__3Av5G",topBar:"Login_topBar__2FKYl",buttonContainer:"Login_buttonContainer___HDtm",errorContainer:"Login_errorContainer__3Rfne",appearFromBottom:"Login_appearFromBottom__25jzz"}},3:function(e,n,t){e.exports={main:"Main_main__3de2d",inputContainer:"Main_inputContainer__35VOy",inputContainerText:"Main_inputContainerText__P3SPV",inputButton:"Main_inputButton__30NvA",loading:"Main_loading__1-56n",enbigger:"Main_enbigger__Z3RkF",blurEffect:"Main_blurEffect__3jrdr",h1Container:"Main_h1Container__2GtL-",rotation:"Main_rotation__1jzl2",topBar:"Main_topBar__2kkWe",logOut:"Main_logOut__zT7Ja",menuContainer:"Main_menuContainer__2znkv",menuContainerOpen:"Main_menuContainerOpen__2NfKL",menuCloseButton:"Main_menuCloseButton__RIzsQ",menuList:"Main_menuList__3YNmC",menuItem:"Main_menuItem__3mXI_",flexContainer:"Main_flexContainer__2QlCf",flexTop:"Main_flexTop__37RFt",flexBottom:"Main_flexBottom__1Y8lE",welcomeContainer:"Main_welcomeContainer__2rSMK"}},35:function(e,n,t){e.exports={container:"App_container__1MQN3"}},42:function(e,n,t){},68:function(e,n,t){"use strict";t.r(n);var a=t(1),c=t.n(a),i=t(34),o=t.n(i),s=(t(42),t(35)),r=t.n(s),l=t(5),u=t(10),j=t.n(u),d=t(0);function b(e){var n=e.label,t=e.id,c=e.value,i=e.onChange,o=e.type,s=e.onKeyPress,r=Object(a.useState)(!1),u=Object(l.a)(r,2),b=u[0],m=u[1];return Object(d.jsxs)("div",{className:b?"".concat(j.a.container," ").concat(j.a.containerActive):j.a.container,children:[void 0!==n&&Object(d.jsx)("label",{className:j.a.label,htmlFor:t,children:n}),Object(d.jsx)("input",{onKeyPress:s,onChange:i,value:c,onFocus:function(e){m(!0)},onBlur:function(e){""===c&&m(!1)},id:t,className:j.a.input,type:o})]})}function m(e){var n=e.label,t=e.id,c=e.value,i=e.onChange,o=Object(a.useState)(!1),s=Object(l.a)(o,2),r=s[0],u=s[1];return Object(d.jsxs)("div",{className:r?"".concat(j.a.container," ").concat(j.a.containerActive):j.a.container,children:[Object(d.jsx)("label",{className:j.a.label,htmlFor:t,children:n}),Object(d.jsx)("input",{onChange:i,value:c,onFocus:function(e){u(!0)},onBlur:function(e){""===c&&u(!1)},id:t,className:j.a.input,type:"password"})]})}var p=t(15),h=t.n(p),f=t(22),O=t(19),_=t.n(O);function x(){return(x=Object(f.a)(h.a.mark((function e(){var n;return h.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,_.a.get("/api/getuser");case 2:if(200===(n=e.sent).data.code){e.next=5;break}throw new Error(n);case 5:return console.log(n),e.abrupt("return",n.data.user);case 7:case"end":return e.stop()}}),e)})))).apply(this,arguments)}function g(){return(g=Object(f.a)(h.a.mark((function e(){var n;return h.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,_.a.get("/api/logout");case 2:return n=e.sent,e.abrupt("return",n);case 4:case"end":return e.stop()}}),e)})))).apply(this,arguments)}var v=t(16),w=t.n(v),C=t(2);function k(){var e=Object(a.useState)({username:"",password:""}),n=Object(l.a)(e,2),t=n[0],c=n[1],i=Object(C.f)(),o=Object(a.useState)(!1),s=Object(l.a)(o,2),r=s[0],u=s[1];return Object(d.jsxs)("div",{className:w.a.logIn,children:[Object(d.jsx)("div",{className:w.a.topBar,children:Object(d.jsx)("h1",{children:"Lnk"})}),Object(d.jsxs)("form",{onSubmit:function(e){var n,a;e.preventDefault(),(n=t.username,a=t.password,_.a.post("/api/login",{email:n,pass:a})).then((function(e){i.push("/")})).catch((function(){u(!0),setTimeout((function(){u(!1)}),4e3)})),c({username:"",password:""})},children:[Object(d.jsx)(b,{onChange:function(e){c((function(n){return{username:e.target.value,password:n.password}}))},id:"username",value:t.username,label:"Email",type:"email"}),Object(d.jsx)(m,{onChange:function(e){c((function(n){return{username:n.username,password:e.target.value}}))},id:"password",value:t.password,label:"Password"}),Object(d.jsx)("div",{className:w.a.buttonContainer,children:Object(d.jsx)("button",{type:"submit",children:"Log in"})})]}),r&&Object(d.jsx)("div",{className:r?w.a.errorContainer:"",children:"Wrong email or password :("})]})}var N=t(37),M=t(3),L=t.n(M),S=t(12),y=t.n(S);function B(e){var n=e.content;return Object(d.jsx)("div",{className:"".concat(y.a.textMessage," ").concat(y.a.message),children:Object(d.jsx)("span",{children:n})})}function I(e){var n=e.content;return Object(d.jsx)("div",{onClick:function(){return e=n,void(window.electron?window.electron.openURL(e):window.open(e));var e},className:"".concat(y.a.message," ").concat(y.a.urlMessage),children:Object(d.jsx)("span",{children:n})})}function E(e){var n=e.links,t=function(e){return"url"===e.type?Object(d.jsx)(I,{content:e.message}):Object(d.jsx)(B,{content:e.message})},a=n.map((function(e,a){return Object(d.jsx)("div",{children:t(e)},n.length-a)}));return Object(d.jsx)("div",{className:y.a.linksContainer,children:a})}var F="wss://lnk.mssnapps.com/ws";function A(e){var n=Object(a.useState)({email:"",firstname:"",id:0,key:"",lastname:"",username:""}),t=Object(l.a)(n,2),c=t[0],i=t[1],o=Object(a.useState)([]),s=Object(l.a)(o,2),r=s[0],u=s[1],j=Object(a.useState)(null),m=Object(l.a)(j,2),p=m[0],h=m[1],f=Object(a.useState)(!1),O=Object(l.a)(f,2),_=O[0],v=O[1],w=Object(a.useState)(""),k=Object(l.a)(w,2),M=k[0],S=k[1],y=Object(C.f)(),B=Object(a.useState)(!1),I=Object(l.a)(B,2),A=I[0],T=I[1],K=Object(a.useState)(!1),P=Object(l.a)(K,2),z=P[0],J=P[1];Object(a.useEffect)((function(){window.electron&&(window.electron.getIsNotificationActive().then((function(e){T(e)})),window.electron.getIsOpenLnk().then((function(e){J(e)})))}),[]);var R=Object(a.useState)(!1),W=Object(l.a)(R,2),D=W[0],Q=W[1],G=function(){if(""!==M){var e=JSON.stringify({code:"message",id:c.key,message:M});p.send(e),S("")}};Object(a.useEffect)((function(){(function(){return x.apply(this,arguments)})().then((function(e){i(e),h(new WebSocket(F)),window.electron&&window.electron.sendId(e)})).catch((function(e){console.error(e),y.push("/login")}))}),[y]),Object(a.useEffect)((function(){""!==c.key&&null!==p&&(p.addEventListener("message",(function(e){var n=JSON.parse(e.data);if("message"===n.code){var t=JSON.parse(n.endMessage);u((function(e){return[t].concat(Object(N.a)(e))}))}})),p.addEventListener("open",(function(){v(!0);var e=JSON.stringify({code:"init",id:c.key,message:""});p.send(e)})),p.addEventListener("close",(function(){h(new WebSocket(F))})),p.addEventListener("error",(function(){v(!1),h(null)})))}),[p,c]);var V=function(){(function(){return g.apply(this,arguments)})().then((function(){y.push("/login")})).catch((function(){alert("There was some problem logging out! :(")}))};return Object(d.jsxs)("div",{className:L.a.main,children:[!_&&Object(d.jsx)("div",{className:L.a.loading,children:Object(d.jsx)("div",{className:L.a.h1Container,children:Object(d.jsx)("h1",{children:"Lnk"})})}),Object(d.jsxs)("div",{className:D?"".concat(L.a.menuContainer," ").concat(L.a.menuContainerOpen):L.a.menuContainer,children:[Object(d.jsx)("button",{className:L.a.menuCloseButton,onClick:function(){return Q(!1)},children:Object(d.jsx)("svg",{"aria-hidden":"false",width:"12",height:"12",viewBox:"0 0 12 12",children:Object(d.jsx)("polygon",{fill:"currentColor",fillRule:"evenodd",points:"11 1.576 6.583 6 11 10.424 10.424 11 6 6.583 1.576 11 1 10.424 5.417 6 1 1.576 1.576 1 6 5.417 10.424 1"})})}),Object(d.jsxs)("ul",{className:L.a.menuList,children:[window.electron&&Object(d.jsxs)("li",{className:L.a.menuItem,children:[Object(d.jsx)("label",{htmlFor:"isNotCheck",children:"Notifications"}),Object(d.jsx)("input",{id:"isNotCheck",onChange:function(e){window.electron&&window.electron.setIsNotificationActive(e.target.checked).then((function(e){T(e)})).catch((function(e){console.error("Error communicating with Electron",e)}))},checked:A,type:"checkbox"})]}),window.electron&&Object(d.jsxs)("li",{className:L.a.menuItem,children:[Object(d.jsx)("label",{htmlFor:"openLnk",children:"Open "}),Object(d.jsx)("input",{id:"openLnk",onChange:function(e){window.electron&&window.electron.setIsOpenLnk(e.target.checked).then((function(e){J(e)})).catch((function(e){console.error("Error communicating with electron",e)}))},checked:z,type:"checkbox"})]}),Object(d.jsx)("li",{onClick:function(){return V()},className:L.a.menuItem,children:"Log out"})]})]}),Object(d.jsxs)("div",{className:L.a.flexContainer,children:[Object(d.jsxs)("div",{className:L.a.flexTop,children:[Object(d.jsxs)("div",{className:L.a.topBar,children:[Object(d.jsx)("h1",{children:"Lnk"}),Object(d.jsx)("button",{className:L.a.logOut,onClick:function(){return Q(!0)},children:"Menu"})]}),Object(d.jsx)("div",{className:L.a.welcomeContainer,children:Object(d.jsxs)("span",{children:["Welcome ",c.username,"!"]})}),Object(d.jsxs)("div",{className:L.a.inputContainer,children:[Object(d.jsx)("div",{className:L.a.inputContainerText,children:Object(d.jsx)(b,{onKeyPress:function(e){"Enter"===e.code&&G()},onChange:function(e){S(e.target.value)},value:M,type:"text"})}),Object(d.jsx)("button",{disabled:""===M,className:L.a.inputButton,onClick:function(){return G()},children:"Send"})]})]}),Object(d.jsx)("div",{className:L.a.flexBottom,children:Object(d.jsx)(E,{links:r})})]})]})}var T=t(17);function K(){return Object(d.jsx)(T.a,{basename:"/",children:Object(d.jsx)("div",{className:r.a.container,children:Object(d.jsxs)(C.c,{children:[Object(d.jsx)(C.a,{path:"/login",children:Object(d.jsx)(k,{})}),Object(d.jsx)(C.a,{path:"/",children:Object(d.jsx)(A,{})})]})})})}var P=function(e){e&&e instanceof Function&&t.e(3).then(t.bind(null,69)).then((function(n){var t=n.getCLS,a=n.getFID,c=n.getFCP,i=n.getLCP,o=n.getTTFB;t(e),a(e),c(e),i(e),o(e)}))};o.a.render(Object(d.jsx)(c.a.StrictMode,{children:Object(d.jsx)(K,{})}),document.getElementById("root")),P()}},[[68,1,2]]]);
//# sourceMappingURL=main.f78f74f3.chunk.js.map